<script>
import Animate from '@/components/Animate.vue'
import Users from '@/Users.js'

export default {
  name: 'Tables',
  components: { Animate },
  data() {
    return {
      users: Users,
      userList: [],
      user: '',
      number: -1,
      tables: [
        { x: 0.5, y: 60.5 },
        { x: 100.5, y: 60.5 },
        { x: 0.5, y: 140.5 },
        { x: 100.5, y: 140.5 },
        { x: 0.5, y: 220.5 },
        { x: 100.5, y: 220.5 },
        { x: 0.5, y: 300.5 },
        { x: 100.5, y: 300.5 }
      ]
    }
  },
  methods: {
    loadUsers() {
      for (let i = 0; i < this.users.length; i++) {
        this.userList = this.userList.concat(this.users[i])
      }
    },
    load() {
      for (let i = 0; i < this.users.length; i++) {
        if (this.users[i].includes(this.user)) {
          this.number = i
        }
      }
    },
    loadTmp(item) {
      this.user = item
      this.load()
    }
  },
  mounted() {
    this.load()
    this.loadUsers()
  }
}
</script>

<template>
  <div id="table" class="offset-anchor__tables"></div>
  <Animate animationClass="animate__fadeInUp" class="tables">
    <h2 class="tables__title">Ваш столик</h2>
    <p class="tables__text">
      Для каждого гостя предусмотрено конкретное место, чтобы вы чувствовали себя комфортно
      в&nbsp;окружении знакомых и&nbsp;близких вам людей.
    </p>
    <p class="tables__text">
      Найдите и&nbsp;кликните на свое имя в&nbsp;списке ниже, чтобы увидеть схему рассадки.
    </p>
    <div v-if="!user" class="tables__users">
      <div v-for="(userGroup, index) in users" class="tables__table_block">
        <h2 class="tables__table_name">{{ (index + 1) }}</h2>
        <div v-for="item in userGroup">
          <a href="#table-position" @click="loadTmp(item)" class="tables__users__user">{{ item }}</a>
        </div>
      </div>
    </div>
    <div id="table-position" v-if="user" class="tables__table">
      <svg width="170" height="350" viewBox="0 0 170 350" fill="none" xmlns="http://www.w3.org/2000/svg">
        <rect x="50.5" y="0.5" width="69" height="29" stroke="#8AAF7A" />
        <rect v-for="(item, index) in tables" :x="item.x" :y="item.y" width="69" height="49" stroke="#8AAF7A"
              :fill="[number === index ? '#8AAF7A' : '']" fill-opacity="0.4" />
        <path
          d="M39.0078 94H34.3086V85.5273C34.3086 85.3711 34.3086 85.0859 34.3086 84.6719C34.3086 84.25 34.3125 83.7852 34.3203 83.2773C34.3359 82.7695 34.3555 82.3125 34.3789 81.9062C34.1758 82.1484 33.9844 82.3555 33.8047 82.5273C33.6328 82.6992 33.4648 82.8594 33.3008 83.0078L31.3555 84.6133L28.9531 81.6602L34.8359 76.8672H39.0078V94Z"
          fill="#8AAF7A" />
        <path
          d="M39.543 160.582C39.543 161.395 39.3672 162.098 39.0156 162.691C38.6719 163.277 38.2109 163.758 37.6328 164.133C37.0625 164.508 36.4375 164.789 35.7578 164.977V165.047C37.125 165.219 38.1797 165.637 38.9219 166.301C39.6719 166.957 40.0469 167.891 40.0469 169.102C40.0469 170.039 39.7969 170.898 39.2969 171.68C38.7969 172.453 38.0195 173.074 36.9648 173.543C35.9102 174.004 34.5547 174.234 32.8984 174.234C31.7891 174.234 30.8438 174.152 30.0625 173.988C29.2812 173.824 28.5234 173.598 27.7891 173.309V169.465C28.5312 169.848 29.293 170.133 30.0742 170.32C30.8633 170.5 31.582 170.59 32.2305 170.59C33.3555 170.59 34.1211 170.43 34.5273 170.109C34.9414 169.789 35.1484 169.359 35.1484 168.82C35.1484 168.43 35.0508 168.098 34.8555 167.824C34.6602 167.551 34.2969 167.34 33.7656 167.191C33.2422 167.043 32.4883 166.969 31.5039 166.969H30.4492V163.488H31.5273C32.4023 163.488 33.0938 163.41 33.6016 163.254C34.1172 163.098 34.4883 162.887 34.7148 162.621C34.9414 162.348 35.0547 162.035 35.0547 161.684C35.0547 161.23 34.8789 160.895 34.5273 160.676C34.1758 160.457 33.7109 160.348 33.1328 160.348C32.6172 160.348 32.1328 160.418 31.6797 160.559C31.2266 160.699 30.832 160.855 30.4961 161.027C30.1602 161.199 29.9062 161.34 29.7344 161.449L27.8125 158.355C28.5234 157.871 29.3359 157.461 30.25 157.125C31.1719 156.789 32.375 156.621 33.8594 156.621C35.625 156.621 37.0117 156.973 38.0195 157.676C39.0352 158.379 39.543 159.348 39.543 160.582Z"
          fill="#8AAF7A" />
        <path
          d="M141.668 170.684H139.781V174H135.211V170.684H128.379V167.285L135.504 156.867H139.781V167.227H141.668V170.684ZM135.211 167.227V165.234C135.211 165.055 135.215 164.828 135.223 164.555C135.23 164.281 135.238 164.008 135.246 163.734C135.262 163.453 135.273 163.219 135.281 163.031C135.297 162.836 135.309 162.73 135.316 162.715H135.188C135.039 163.066 134.902 163.359 134.777 163.594C134.652 163.82 134.488 164.09 134.285 164.402L132.387 167.227H135.211Z"
          fill="#8AAF7A" />
        <path
          d="M34.75 242.773C35.7031 242.773 36.5703 242.988 37.3516 243.418C38.1328 243.848 38.7578 244.473 39.2266 245.293C39.6953 246.113 39.9297 247.113 39.9297 248.293C39.9297 249.566 39.6719 250.648 39.1562 251.539C38.6484 252.422 37.8789 253.094 36.8477 253.555C35.8242 254.008 34.5312 254.234 32.9688 254.234C31.9766 254.234 31.0703 254.156 30.25 254C29.4375 253.852 28.7109 253.621 28.0703 253.309V249.512C28.6719 249.785 29.3945 250.035 30.2383 250.262C31.0898 250.48 31.8711 250.59 32.582 250.59C33.1523 250.59 33.6367 250.508 34.0352 250.344C34.4336 250.18 34.7344 249.938 34.9375 249.617C35.1484 249.297 35.2539 248.902 35.2539 248.434C35.2539 247.785 35.0195 247.277 34.5508 246.91C34.082 246.535 33.3711 246.348 32.418 246.348C31.9883 246.348 31.5664 246.391 31.1523 246.477C30.7383 246.562 30.375 246.656 30.0625 246.758L28.3633 245.914L29.0078 236.867H38.7812V240.723H32.9453L32.7344 242.984C32.9844 242.938 33.2383 242.891 33.4961 242.844C33.7617 242.797 34.1797 242.773 34.75 242.773Z"
          fill="#8AAF7A" />
        <path d="M30.418 334L36.3008 320.699H28.8828V316.867H41.2461V319.598L35.2109 334H30.418Z" fill="#8AAF7A" />
        <path
          d="M128.789 246.758C128.789 245.773 128.859 244.797 129 243.828C129.141 242.852 129.395 241.934 129.762 241.074C130.129 240.207 130.648 239.441 131.32 238.777C131.992 238.105 132.855 237.578 133.91 237.195C134.965 236.812 136.25 236.621 137.766 236.621C138.102 236.621 138.512 236.641 138.996 236.68C139.48 236.719 139.883 236.766 140.203 236.82V240.441C139.883 240.379 139.523 240.328 139.125 240.289C138.727 240.242 138.238 240.219 137.66 240.219C136.504 240.219 135.59 240.395 134.918 240.746C134.254 241.09 133.773 241.586 133.477 242.234C133.18 242.883 133.008 243.66 132.961 244.566H133.102C133.305 244.191 133.551 243.855 133.84 243.559C134.137 243.254 134.5 243.016 134.93 242.844C135.359 242.664 135.879 242.574 136.488 242.574C137.488 242.574 138.348 242.793 139.066 243.23C139.785 243.66 140.336 244.289 140.719 245.117C141.102 245.945 141.293 246.953 141.293 248.141C141.293 249.422 141.047 250.52 140.555 251.434C140.07 252.34 139.375 253.035 138.469 253.52C137.57 253.996 136.496 254.234 135.246 254.234C134.324 254.234 133.469 254.086 132.68 253.789C131.898 253.492 131.215 253.039 130.629 252.43C130.051 251.812 129.598 251.035 129.27 250.098C128.949 249.152 128.789 248.039 128.789 246.758ZM135.141 250.566C135.633 250.566 136.031 250.379 136.336 250.004C136.648 249.629 136.805 249.039 136.805 248.234C136.805 247.586 136.676 247.078 136.418 246.711C136.168 246.336 135.758 246.148 135.188 246.148C134.805 246.148 134.48 246.242 134.215 246.43C133.949 246.609 133.746 246.84 133.605 247.121C133.465 247.402 133.395 247.695 133.395 248C133.395 248.305 133.426 248.609 133.488 248.914C133.559 249.219 133.664 249.496 133.805 249.746C133.953 249.988 134.137 250.188 134.355 250.344C134.574 250.492 134.836 250.566 135.141 250.566Z"
          fill="#8AAF7A" />
        <path
          d="M135.047 316.621C136.18 316.621 137.172 316.773 138.023 317.078C138.883 317.383 139.555 317.848 140.039 318.473C140.523 319.09 140.766 319.867 140.766 320.805C140.766 321.492 140.637 322.098 140.379 322.621C140.129 323.137 139.781 323.59 139.336 323.98C138.898 324.363 138.391 324.695 137.812 324.977C138.352 325.281 138.887 325.637 139.418 326.043C139.949 326.449 140.391 326.93 140.742 327.484C141.094 328.031 141.27 328.684 141.27 329.441C141.27 330.355 141.047 331.176 140.602 331.902C140.156 332.621 139.473 333.191 138.551 333.613C137.629 334.027 136.445 334.234 135 334.234C133.555 334.234 132.371 334.035 131.449 333.637C130.527 333.238 129.848 332.684 129.41 331.973C128.98 331.254 128.766 330.426 128.766 329.488C128.766 328.691 128.898 328.02 129.164 327.473C129.438 326.926 129.809 326.461 130.277 326.078C130.746 325.695 131.281 325.352 131.883 325.047C131.406 324.727 130.969 324.363 130.57 323.957C130.172 323.551 129.855 323.086 129.621 322.562C129.387 322.039 129.27 321.445 129.27 320.781C129.27 319.859 129.516 319.09 130.008 318.473C130.5 317.855 131.18 317.395 132.047 317.09C132.922 316.777 133.922 316.621 135.047 316.621ZM133.008 329.301C133.008 329.777 133.18 330.164 133.523 330.461C133.867 330.758 134.344 330.906 134.953 330.906C135.664 330.906 136.184 330.773 136.512 330.508C136.848 330.234 137.016 329.863 137.016 329.395C137.016 329.043 136.91 328.727 136.699 328.445C136.496 328.156 136.258 327.906 135.984 327.695C135.711 327.484 135.473 327.32 135.27 327.203L134.953 327.016C134.602 327.195 134.277 327.398 133.98 327.625C133.691 327.844 133.457 328.094 133.277 328.375C133.098 328.648 133.008 328.957 133.008 329.301ZM135.023 319.961C134.641 319.961 134.309 320.074 134.027 320.301C133.746 320.52 133.605 320.82 133.605 321.203C133.605 321.453 133.664 321.688 133.781 321.906C133.906 322.117 134.07 322.312 134.273 322.492C134.484 322.672 134.719 322.836 134.977 322.984C135.203 322.852 135.426 322.707 135.645 322.551C135.863 322.395 136.047 322.207 136.195 321.988C136.344 321.77 136.418 321.508 136.418 321.203C136.418 320.82 136.277 320.52 135.996 320.301C135.723 320.074 135.398 319.961 135.023 319.961Z"
          fill="#8AAF7A" />
        <path
          d="M142.117 94H129.684V90.9531L133.867 86.7227C134.734 85.8164 135.406 85.0898 135.883 84.543C136.367 83.9961 136.707 83.5312 136.902 83.1484C137.098 82.7656 137.195 82.3672 137.195 81.9531C137.195 81.4453 137.031 81.0781 136.703 80.8516C136.375 80.625 135.988 80.5117 135.543 80.5117C135.004 80.5117 134.457 80.668 133.902 80.9805C133.355 81.2852 132.734 81.7383 132.039 82.3398L129.496 79.3633C130.012 78.9023 130.559 78.4648 131.137 78.0508C131.715 77.6289 132.398 77.2852 133.188 77.0195C133.977 76.7539 134.938 76.6211 136.07 76.6211C137.234 76.6211 138.242 76.8242 139.094 77.2305C139.953 77.6367 140.617 78.1953 141.086 78.9062C141.555 79.6094 141.789 80.4102 141.789 81.3086C141.789 82.3008 141.605 83.1875 141.238 83.9688C140.879 84.7422 140.336 85.5195 139.609 86.3008C138.883 87.0742 137.977 87.9531 136.891 88.9375L135.637 90.0625V90.1797H142.117V94Z"
          fill="#8AAF7A" />
      </svg>
    </div>
  </Animate>
</template>
<style lang="scss">
.tables {
  display: flex;
  flex-direction: column;
  padding: 0 4rem;
  margin-bottom: 6.5rem;

  &__title {
    margin-bottom: 1rem;
  }

  &__table_name {
    font-size: 36px;
    color: #8aaf7a;
    margin-bottom: 13px;
    font-weight: bold;
  }

  &__users {
    padding-top: 5px;
    display: flex;
    align-items: flex-start;
    flex-wrap: wrap;
    font-size: 14px;


    &__user {
      text-decoration: none;
      border-bottom: dashed #8aaf7a 1px;
    }

    &__user:hover {
      border-bottom: solid #8aaf7a 1px;
      cursor: pointer;
    }
  }

  &__table_block {
    width: 50%;
    //border-left: #8aaf7a solid 1px;
    //padding-left: 5px;
    //padding-bottom: 10px;
    margin-bottom: 20px;
  }

  &__table_block:nth-child(2n) {
    //border-left: #8aaf7a solid 1px;
    padding-left: 10px;
  }

  &__text {
    margin-bottom: 1.5rem;
  }

  &__table {
    padding-top: 25px;
    margin: 0 auto;
  }
}
</style>
