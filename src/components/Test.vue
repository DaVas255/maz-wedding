<script>
import Radio from '@/components/Quiz/Type/Radio.vue'
import Animate from '@/components/Animate.vue'
import Questions from '@/components/Quiz/Questions.js'
import Five from '@/assets/img/quiz/5.jpg'
import Four from '@/assets/img/quiz/4.png'
import Three from '@/assets/img/quiz/3.jpg'
import Two from '@/assets/img/quiz/2.jpg'

export default {
  components: { Radio, Animate },
  data() {
    return {
      Questions: Questions,
      state: 0,
      feedback: false,
      the_end: false,
      answers: [],
      user_answer: -1,
      grade: 0,
      grade_title: '',
      Processed: false,
      img: Five
    }
  },
  methods: {
    answer() {
      this.feedback = Questions[this.state].answers[this.user_answer].feedback
      if (Questions[this.state].answers[this.user_answer].is_true) {
        this.grade++
      }
      console.log(this.user_answer, this.feedback)
    },
    next() {
      if ((this.state + 1) < Questions.length) {
        ++this.state
        this.feedback = false
      } else {
        this.the_end = true
        if (this.grade > 8) {
          this.img = Five
          this.grade_title = '–í—ã ‚Äì –¥–æ–≤–æ–ª—å–Ω—ã–π –∫–æ—Ç'
          this.feedback = '–í—ã –∑–Ω–∞–µ—Ç–µ –Ω–∞—Å –ª—É—á—à–µ –≤—Å–µ—Ö! –í–æ—Ç –∫—Ç–æ –±—É–¥–µ—Ç –∏—Å–∫—Ä–µ–Ω–Ω–µ —Ä–∞–¥–æ–≤–∞—Ç—å—Å—è –∑–∞ –Ω–∞—Å, –≥–æ–≤–æ—Ä–∏—Ç—å —Ç–µ–ø–ª—ã–µ —Å–ª–æ–≤–∞ –∏ —Ä–∞—Å—Ç—Ä–æ–≥–∞–µ—Ç—Å—è –æ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —á—É–≤—Å—Ç–≤. –í–æ–∑–º–æ–∂–Ω–æ, –≤—ã –∫—Ç–æ-—Ç–æ –∏–∑ –Ω–∞—à–∏—Ö —Ä–æ–¥–∏—Ç–µ–ª–µ–π –∏–ª–∏ –ª—É—á—à–∏—Ö –¥—Ä—É–∑–µ–π. –ù–æ —ç—Ç–æ –Ω–µ —Ç–æ—á–Ω–æ.'
        } else if (this.grade > 5) {
          this.img = Four
          this.grade_title = '–í—ã ‚Äì –∫–æ—Ç –°—Ç–µ–ø–∞–Ω'
          this.feedback = '–í—ã –≤–µ—Ä–Ω–æ –æ—Ç–≤–µ—Ç–∏–ª–∏ –Ω–∞ –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –≤–æ–ø—Ä–æ—Å–æ–≤, –¥–æ–≤–æ–ª—å–Ω—ã —Å–æ–±–æ–π –∏ —É–∂–µ –≥–æ—Ç–æ–≤—ã –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫—É. –û—Ç–ª–∏—á–Ω–æ! –ñ–¥–∞—Ç—å –æ—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º –Ω–µ–º–Ω–æ–≥–æ.'
        } else if (this.grade > 2) {
          this.img = Three
          this.grade_title = '–í—ã ‚Äì –∫–æ—Ç –ë–µ–Ω–¥–µ—Ä'
          this.feedback = '–í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –º–µ–Ω—å—à–µ —á–µ–º –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –≤–æ–ø—Ä–æ—Å–æ–≤ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ —Å–æ–≥–ª–∞—Å–Ω—ã —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏. –î–∞ –ª–∞–∞–¥–Ω–æ, –≤—ã –≤—Å–µ —Ä–∞–≤–Ω–æ —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–∏–ª–∏—Å—å. –ú—ã –±—É–¥–µ–º —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å –≤–∞—Å –Ω–∞ –Ω–∞—à–µ–º –ø—Ä–∞–∑–¥–Ω–∏–∫–µ!'
        } else {
          this.img = Two
        }
      }
    }
  }
}
</script>

<template>
  <Animate animationClass="animate__fadeInUp" class="test">
    <h2 class="test__title">–¢–µ—Å—Ç <span class="accent-text-main-color">–ö–∞–∫–æ–π –≤—ã –≥–æ—Å—Ç—å?</span></h2>
    <p>
      –®—É—Ç–æ—á–Ω—ã–π —Ç–µ—Å—Ç –æ&nbsp;—Ç–æ–º, –Ω–∞—Å–∫–æ–ª—å–∫–æ —Ö–æ—Ä–æ—à–æ –≤—ã –Ω–∞—Å –∑–Ω–∞–µ—Ç–µ. –ù–µ –±–æ–π—Ç–µ—Å—å, –æ–Ω –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–Ω–∞–Ω–∏—è, –∏&nbsp;–æ—Ü–µ–Ω–∫–∏ –∑–∞
      –Ω–µ–≥–æ –Ω–µ —Å—Ç–∞–≤—è—Ç—Å—è. –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤—á–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç —É–∑–Ω–∞—Ç—å –Ω–∞—Å —á—É—Ç—å –ª—É—á—à–µ üôÇ
    </p>
    <hr>
    <!--    //-->
    <div v-if="!feedback">

      <p>
        {{ Questions[this.state].text }}
      </p>
      <p v-for="(answer, index) in Questions[this.state].answers">
        <label>
          <input v-model="user_answer" name="answers" type="radio" :value="index" :checked="Processed">
          {{ answer.text }}
        </label>
      </p>

    </div>
    <!--    //-->
    <div v-if="feedback">
      <div v-if="the_end">
        <img class="quiz__img_grade" :src="img" alt="!">
        <p><b>{{ this.grade }} –∏–∑ {{ Questions.length }}&nbsp;&nbsp;&nbsp;&nbsp;{{ this.grade_title }}</b></p>
      </div>
      <p><b></b></p>
      <p>{{ this.feedback }}</p>
    </div>
    <div v-if="!feedback && user_answer !== -1" class="form__map">
      <button class="quiz-link" @click="answer">–û—Ç–≤–µ—Ç–∏—Ç—å</button>
    </div>

    <div v-if="feedback && !the_end" class="form__map">
      <button class="quiz-link" @click="next">–î–∞–ª–µ–µ</button>
    </div>
    <hr>
  </Animate>
</template>

<style lang="scss">
.test {
  margin-bottom: 8rem;
  padding: 0 4rem;

  &__title {
    margin-bottom: 1rem;
  }
}

.quiz {
  &__img_grade {
    max-width: 300px;
  }

  &-link {
    width: 16rem;
    height: 3rem;
    display: flex;
    justify-content: center;
    align-items: center;

    text-decoration: none;
    color: #ffffff;
    font-weight: 700;
    line-height: 2.4rem;
    font-size: 1.2rem;
    background-color: var(--main-color);
  }
}
</style>
